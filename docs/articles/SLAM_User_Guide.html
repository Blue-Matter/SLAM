<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SLAM User Guide • SLAM</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="SLAM User Guide">
<meta property="og:description" content="SLAM">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SLAM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/SLAM_User_Guide.html">SLAM User Guide</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>SLAM User Guide</h1>
                        <h4 data-toc-skip class="author">Adrian Hordyk
<a href="mailto:adrian@bluematterscience.com" class="email">adrian@bluematterscience.com</a>
</h4>
            
            <h4 data-toc-skip class="date">2023-07-05</h4>
      
      
      <div class="hidden name"><code>SLAM_User_Guide.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <code>SLAM</code> package is designed to simulate fishery
dynamics and data, and to apply an age-structured assessment model to
fishery data for a short-lived semelparous species such as octopus.</p>
<p><code>SLAM</code> is designed with a monthly time-step and to fit to
catch-at-weight data. If available, it will also fit to an index of
fishing effort. <code>SLAM</code> estimates the selectivity pattern,
fishing mortality (F), and the spawning potential ratio (SPR) for each
month, as well as reference points related to F and SPR.</p>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<p>The <code>SLAM</code> package can be installed directly from GitHub.
A couple of prerequisites are required to install <code>SLAM</code> from
GitHub. RTools is required because the package uses <a href="https://cran.r-project.org/package=TMB" class="external-link">TMB</a>. The
<code>devtools</code> package can check if RTools is installed on your
system:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load `devtools` if it's installed</span></span>
<span><span class="va">chk</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://devtools.r-lib.org/" class="external-link">'devtools'</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: devtools</span></span>
<span><span class="co">#&gt; Loading required package: usethis</span></span>
<span></span>
<span><span class="co"># install `devtools` if necessary</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="va">chk</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'devtools'</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://devtools.r-lib.org/" class="external-link">'devtools'</a></span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check if RTools is installed</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://pkgbuild.r-lib.org/reference/has_rtools.html" class="external-link">find_rtools</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">'RTools needs to be installed'</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>If you get an error message after running the code above, you need to
install RTools. Instructions for installing RTools for Windows machines
are available <a href="https://cran.r-project.org/bin/windows/Rtools/rtools40.html" class="external-link">here</a>.
A quick web search will find similar instructions for installing RTools
on OS machines.</p>
<div class="section level4">
<h4 id="installing-slam">Installing <code>SLAM</code><a class="anchor" aria-label="anchor" href="#installing-slam"></a>
</h4>
<p>Once RTools is installed, <code>SLAM</code> can be installed
with:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">'blue-matter/SLAM'</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="applying-slam-to-fishery-data">Applying <code>SLAM</code> to Fishery Data<a class="anchor" aria-label="anchor" href="#applying-slam-to-fishery-data"></a>
</h2>
<p>In each new R session, the <code>SLAM</code> package must first be
loaded into memory:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">SLAM</span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: dplyr</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span></code></pre></div>
<div class="section level3">
<h3 id="importing-fishery-data">Importing Fishery Data<a class="anchor" aria-label="anchor" href="#importing-fishery-data"></a>
</h3>
<p>Fishery data is loaded into an object of class <code>Data</code>.
Fishery data can be loaded from a correctly structured CSV file.</p>
<p>The <code>Import</code> function can be used to import fishery data
from a correctly formatted CSV file.</p>
<p>The <code>SLAM</code> package includes a few files with example data.
The <code>Example_Data</code> function will print out the full file
paths to these example files:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/Example_Data.html">Example_Data</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "C:/Users/User/AppData/Local/R/win-library/4.2/SLAM/Data_Example.csv"  </span></span>
<span><span class="co">#&gt; [2] "C:/Users/User/AppData/Local/R/win-library/4.2/SLAM/Data_Example_2.csv"</span></span>
<span><span class="co">#&gt; [3] "C:/Users/User/AppData/Local/R/win-library/4.2/SLAM/Data_Template.csv"</span></span></code></pre></div>
<p>You can examine the example files to see the specific format of the
CSV files containing the example data. Data files must follow this same
structure.</p>
<p>“Data_Template.csv” is an empty data file that can be used as a
template for your data.</p>
<p>The data can be imported from the CSV file using the
<code>Import</code> function:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">MyData</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Import.html">Import</a></span><span class="op">(</span><span class="fu"><a href="../reference/Example_Data.html">Example_Data</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p>Once you’ve imported a <code>Data</code> object, use the
<code>Check</code> function to check that everything is structured
correctly:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/Check.html">Check</a></span><span class="op">(</span><span class="va">MyData</span><span class="op">)</span></span>
<span><span class="co">#&gt; Data passes all checks</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="structure-of-the-csv-data-file">Structure of the CSV Data File<a class="anchor" aria-label="anchor" href="#structure-of-the-csv-data-file"></a>
</h3>
<p>The CSV files containing the data for the <code>SLAM</code> model has
to be structured in a specific way. The easiest method for creating your
own data file is to copy and edit one of the example data files.</p>
<p>The sections below describe the structure of each section of the CSV
file.</p>
<div class="section level4">
<h4 id="meta-data">Meta-Data<a class="anchor" aria-label="anchor" href="#meta-data"></a>
</h4>
<p>The first 7 rows of the CSV file contain the meta-data used for
reporting.</p>
<p>The text in the first column must be exactly: ‘Field’, ‘Fishery’,
‘Location’, ‘Species’, ‘Common_Name’, ‘Author’, and ‘Date’.</p>
<p>The first row of the second column must say ‘Value’.</p>
<p>Enter the relevant meta-data information for your fishery in the
remaining rows. Missing values are accepted.</p>
</div>
<div class="section level4">
<h4 id="age-schedules">Age Schedules<a class="anchor" aria-label="anchor" href="#age-schedules"></a>
</h4>
<p>The first column in row 9 must say ‘Age Schedules’. Row 10 must have
the text ‘Ages’, ‘Weight_Age_Mean’, ‘Weight_Age_SD’, ‘Maturity_at_Age’,
‘M_at_Age’, ‘Post_Spawning_Mortality’ in columns 1 to 6. Enter the
corresponding information in the rows below. There must be values for
all ages (rows) and all columns.</p>
</div>
<div class="section level4">
<h4 id="caw-binned-data">CAW Binned Data<a class="anchor" aria-label="anchor" href="#caw-binned-data"></a>
</h4>
<p>Next, enter the catch-at-weight (CAW) data. The row with ‘CAW Binned
Data’ in the first column indicates the beginning of the CAW Data. The
row below this must have ‘Year’, ‘Month’, and then numeric values for
the mid-points of the CAW bins. The CAW bins must increase sequentially
with the same increment between each bin.</p>
<p>The Year and Month columns should increase sequentially by month.
Months should be specified as integers. There can not be any missing
months.</p>
<p>Enter the observed weight composition data for each month in the
corresponding row. The default is to enter raw observed numbers, such
that summing over the weight bins results in the total sample size for
that month.</p>
<p>The CAW Data cannot have any missing rows.</p>
</div>
<div class="section level4">
<h4 id="indices">Indices<a class="anchor" aria-label="anchor" href="#indices"></a>
</h4>
<p>The row with the text ‘Index Data’ in the first column indicates the
beginning of the index time-series data. The row below this must have
the text ‘Year’, ‘Month’, ‘Mean’, ‘SD’, and ‘Type’.</p>
<p>The ‘Year’ and ‘Month’ values must exactly match those for the CAW
data (i.e., it must start and end at the same years and months as the
CAW data).</p>
<p>Enter the mean value and the standard deviation (log-normal) for any
available ‘Effort’, ‘Catch’, and/or ‘Biomass’ indices. Enter the
corresponding type (‘Effort’, ‘Catch’, ‘Biomass’) in the ‘Type’
column.</p>
<p>The data-sets should appear below each other (e.g., first Effort then
Catch).</p>
<p>Missing values should be indicated with NA.</p>
</div>
<div class="section level4">
<h4 id="parameters">Parameters<a class="anchor" aria-label="anchor" href="#parameters"></a>
</h4>
<p>The final information to enter is parameters for the assessment
model. If the parameters are not provided, default values will be
used.</p>
<p>The row with text ‘Parameters’, ‘Value’, and (optionally)
‘Description’ indicates the beginning of the parameters section. The
first column below this should have the text: ‘Steepness’, ‘sigmaR’,
‘sigmaF’, and ‘sigmaR0’. Enter the corresponding values in the second
column.</p>
</div>
</div>
<div class="section level3">
<h3 id="plotting-the-data">Plotting the Data<a class="anchor" aria-label="anchor" href="#plotting-the-data"></a>
</h3>
<p>Once a <code>Data</code> object is complete, the assumed life-history
information, the weight composition data, and the indices (if any) can
be plotted:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_at_Age.html">plot_at_Age</a></span><span class="op">(</span><span class="va">MyData</span><span class="op">)</span></span></code></pre></div>
<p><img src="SLAM_User_Guide_files/figure-html/atage-1.png" width="700"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_CAW.html">plot_CAW</a></span><span class="op">(</span><span class="va">MyData</span><span class="op">)</span></span>
<span><span class="va">p</span><span class="op">$</span><span class="va">p</span></span></code></pre></div>
<p><img src="SLAM_User_Guide_files/figure-html/caw-1.png" width="700"></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_Indices.html">plot_Indices</a></span><span class="op">(</span><span class="va">MyData</span><span class="op">)</span></span></code></pre></div>
<p><img src="SLAM_User_Guide_files/figure-html/indices-1.png" width="700"></p>
<p>The <code>plot_CAW</code> return a list with <code>ggplot</code>
object (<code>p</code>) and a data.frame containing the information
presented in the plots (<code>df</code>).</p>
<div class="section level4">
<h4 id="data-report">Data Report<a class="anchor" aria-label="anchor" href="#data-report"></a>
</h4>
<p>A HTML Data Report including all these plots can be generated with
the <code>Report</code> function:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/Report.html">Report</a></span><span class="op">(</span><span class="va">MyData</span><span class="op">)</span></span></code></pre></div>
<p>This will compile a HTML report with figures and tables summarizing
your fishery data, and open the HTML file in your web browser.</p>
<p>See <a href="Data_Report.html" target="_blank">here</a> for the
example Data Report created above.</p>
</div>
</div>
<div class="section level3">
<h3 id="running-assessment">Running Assessment<a class="anchor" aria-label="anchor" href="#running-assessment"></a>
</h3>
<p>Now that the Data is imported and checked, we are ready to run the
<code>SLAM</code> assessment model. This is done with the
<code>Assess</code> function:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">MyAssess</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Assess.html">Assess</a></span><span class="op">(</span><span class="va">MyData</span><span class="op">)</span></span>
<span><span class="co">#&gt; Parameters pass all checks</span></span>
<span><span class="co">#&gt; Index, Effort, and Catch detected. Only fitting to Index and Catch. Set `Data$Fit_Effort=1` to fit to Effort as well.</span></span></code></pre></div>
<div class="section level4">
<h4 id="plotting-the-assessment-results">Plotting the Assessment Results<a class="anchor" aria-label="anchor" href="#plotting-the-assessment-results"></a>
</h4>
<p>The assessment output can be plotted, e.g.,:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_CAW.html">plot_CAW</a></span><span class="op">(</span><span class="va">MyAssess</span><span class="op">)</span></span>
<span><span class="va">p</span><span class="op">$</span><span class="va">p</span></span></code></pre></div>
<p><img src="SLAM_User_Guide_files/figure-html/caw2-1.png" width="700"></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_Indices.html">plot_Indices</a></span><span class="op">(</span><span class="va">MyAssess</span><span class="op">)</span></span></code></pre></div>
<p><img src="SLAM_User_Guide_files/figure-html/indices2-1.png" width="700"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_SPR.html">plot_SPR</a></span><span class="op">(</span><span class="va">MyAssess</span><span class="op">)</span></span></code></pre></div>
<p><img src="SLAM_User_Guide_files/figure-html/spr-1.png" width="700"></p>
<p>The <code>Report</code> function can also be used to generate an
Assessment Report:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/Report.html">Report</a></span><span class="op">(</span><span class="va">MyAssess</span><span class="op">)</span></span></code></pre></div>
<p>The example assessment report can be found <a href="Assessment_Report.html" target="_blank">here</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Adrian Hordyk.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
